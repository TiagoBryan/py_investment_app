{% extends "global/base.html" %}
{% block header %}
{% include "global/partials/_header.html" %}
{% endblock header %}
{% block content %}

<div class="dashboard-container">
    
    <!-- Hero Section -->
    <div class="dashboard-hero">
        <h1>Visão Geral</h1>
        <p>Gerencie suas finanças e dados pessoais.</p>
    </div>

    <!-- BLOCO 1: Status da Conta Corrente -->
    <h2 class="section-title">Minha Conta</h2>
    <div class="grid-cards">
        {% if conta_id %}
            <!-- Card Conta Ativa -->
            <div class="card-action card-account">
                <div>
                    <div class="card-title">Conta Corrente Ativa</div>
                    <p class="card-desc">Conta ID: #{{ conta_id }}</p>
                    <p class="card-desc" style="opacity:0.8; font-size:0.85rem; margin-top:5px;">Status: Operacional</p>
                </div>
                <a href="{% url 'conta_desativar_page' conta_id %}" class="btn-action" style="color: var(--error-color);">
                    Encerrar Conta
                </a>
            </div>
        {% else %}
            <!-- Card Criar Conta -->
            <div class="card-action" style="border: 2px dashed var(--accent-color); background: #f8fafc;">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="5" width="20" height="14" rx="2" /><line x1="2" y1="10" x2="22" y2="10" /></svg>
                </div>
                <div>
                    <h3 class="card-title">Ativar Conta Corrente</h3>
                    <p class="card-desc">Você ainda não possui uma conta ativa. Comece agora para realizar transações.</p>
                </div>
                <a href="{% url 'conta_criar_page' %}" class="btn btn-primary" style="margin-top:1rem;">Criar Conta Agora</a>
            </div>
        {% endif %}
    </div>

    <!-- BLOCO 2: Transações Financeiras (Só exibe se tiver conta, ou exibe desabilitado) -->
    {% if conta_id %}
    <h2 class="section-title">Transações & Serviços</h2>
    <div class="grid-cards">
        
        <!-- Depósito -->
        <a href="{% url 'deposito_page' %}" class="card-action">
            <div class="card-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
            </div>
            <div>
                <h3 class="card-title">Depósito</h3>
                <p class="card-desc">Adicione fundos à sua conta.</p>
            </div>
        </a>

        <!-- Saque -->
        <a href="{% url 'saque_page' %}" class="card-action">
            <div class="card-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><polyline points="19 12 12 19 5 12"></polyline></svg>
            </div>
            <div>
                <h3 class="card-title">Saque</h3>
                <p class="card-desc">Retire dinheiro ou faça transferências.</p>
            </div>
        </a>

        <!-- Score -->
        <a href="{% url 'score_page' %}" class="card-action">
            <div class="card-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
            </div>
            <div>
                <h3 class="card-title">Meu Score</h3>
                <p class="card-desc">Consulte sua pontuação de crédito.</p>
            </div>
        </a>
        <!-- Investimentos -->
        <a href="{% url 'investimentos_dashboard_page' %}" class="card-action" style="border-left: 4px solid var(--invest-color);">
            <div class="card-icon" style="color: var(--invest-color); background-color: var(--invest-bg);">
                <!-- Ícone de Gráfico/Crescimento -->
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="20" x2="12" y2="10"></line><line x1="18" y1="20" x2="18" y2="4"></line><line x1="6" y1="20" x2="6" y2="16"></line></svg>
            </div>
            <div>
                <h3 class="card-title" style="color: var(--invest-color);">Investimentos</h3>
                <p class="card-desc">Gerencie seu patrimônio e visualize projeções.</p>
            </div>
        </a>

    </div>
    {% endif %}

    <!-- BLOCO 3: Configurações de Perfil -->
    <h2 class="section-title">Configurações</h2>
    <div class="grid-cards">
        
        <!-- Editar Perfil -->
        <a href="{% url 'users_me_change_page' %}" class="card-action">
            <div class="card-icon" style="color: var(--text-light);">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
            </div>
            <div>
                <h3 class="card-title">Meus Dados</h3>
                <p class="card-desc">Atualize suas informações pessoais.</p>
            </div>
        </a>

        <!-- Trocar Senha -->
        <a href="{% url 'password_change_page' %}" class="card-action">
            <div class="card-icon" style="color: var(--text-light);">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
            </div>
            <div>
                <h3 class="card-title">Segurança</h3>
                <p class="card-desc">Altere sua senha de acesso.</p>
            </div>
        </a>

        <!-- Trocar Email -->
        <a href="{% url 'email_change_page' %}" class="card-action">
            <div class="card-icon" style="color: var(--text-light);">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
            </div>
            <div>
                <h3 class="card-title">E-mail</h3>
                <p class="card-desc">{{ email }}</p>
            </div>
        </a>

        <a href="{% url 'user_deactivate_page' %}" class="card-action" style="border-color: rgba(220, 53, 69, 0.2);">
            <div class="card-icon" style="color: var(--error-color);">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"></path><line x1="18" y1="9" x2="12" y2="15"></line><line x1="12" y1="9" x2="18" y2="15"></line></svg>
            </div>
            <div>
                <h3 class="card-title" style="color: var(--error-color);">Excluir Acesso</h3>
                <p class="card-desc">Remover usuário e sair.</p>
            </div>
        </a>

    </div>
</div>
{% endblock content %}